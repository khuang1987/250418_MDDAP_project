# SA指标数据验证配置文件
# 命名规范: config_{功能模块}_{数据类型}.yaml

# 验证参数配置
validation:
  # 抽样验证数量
  sample_size: 10  # 每个数据类型的抽样记录数
  
  # 时间计算误差容忍度（小时）
  time_tolerance: 0.1  # LT, PT, ST计算允许的最大误差
  
  # 数据质量评分规则
  quality_score:
    # 每个错误扣除的分数
    penalty_per_error: 2
    # 最低合格分数
    passing_score: 80

# 数据文件路径配置
data_paths:
  # 发布目录
  publish_dir: "C:\\Users\\huangk14\\OneDrive - Medtronic PLC\\CZ Production - 文档\\General\\POWER BI 数据源 V2\\30-MES导出数据\\publish"
  
  # 文件名映射
  file_mapping:
    sfc: "SFC_batch_report_latest.parquet"
    mes: "MES_batch_report_latest.parquet"
    sap_routing: "SAP_Routing_latest.parquet"

# SFC数据验证配置
sfc_validation:
  # 必需字段
  required_fields:
    - "BatchNumber"
    - "Operation"
    - "TrackOutTime"
    - "machine"
  
  # 时间计算字段
  time_fields:
    - "TrackOutTime"
    - "CheckInTime"
    - "EnterStepTime"
    - "LT"
    - "PT"
    - "ST"
  
  # 标准时间字段
  standard_time_fields:
    - "EH_machine(s)"
    - "EH_labor(s)"
    - "OEE"

# MES数据验证配置
mes_validation:
  # 必需字段
  required_fields:
    - "BatchNumber"
    - "TrackOutTime"
    - "DueTime"
  
  # 合并字段
  merge_fields:
    - "Checkin_SFC"
  
  # 标准时间字段
  standard_time_fields:
    - "EH_machine(s)"
    - "EH_labor(s)"
    - "OEE"
  
  # 时间序列字段
  time_sequence_fields:
    - "TrackOutTime"
    - "PreviousBatchEndTime"

# SAP Routing数据验证配置
sap_routing_validation:
  # 必需字段
  required_fields:
    - "Material Number"
    - "Operation"
    - "Group"
  
  # 唯一性字段组合
  unique_key_fields:
    - "Material Number"
    - "Operation"
  
  # 标准时间字段
  standard_time_fields:
    - "EH_machine(s)"
    - "EH_labor(s)"
    - "OEE"

# 报告配置
report:
  # 报告输出目录
  output_dir: "logs"
  
  # 报告文件名格式
  filename_format: "validation_report_sa_{timestamp}.txt"
  
  # 时间戳格式
  timestamp_format: "%Y%m%d_%H%M%S"
  
  # 错误显示限制
  max_errors_display: 3  # 每个类型最多显示的错误数量

# 日志配置
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  file: "../06_日志文件/etl_validate_sa.log"
