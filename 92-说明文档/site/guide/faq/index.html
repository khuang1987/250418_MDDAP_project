<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Medtronic CZ Ops Team" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>常见问题 FAQ - CZ Ops 数字化数据平台 - 电子说明书</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../stylesheets/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "\u5e38\u89c1\u95ee\u9898 FAQ";
        var mkdocs_page_input_path = "guide\\faq.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> CZ Ops 数字化数据平台 - 电子说明书
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">首页</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">KPI 核心指标</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../kpi/">KPI 指标体系</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >供应链 KPI</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/supply-chain/">供应链 KPI 总览</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/sa/">SA - 计划达成率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/inventory-turns/">IT - 库存周转率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/otd/">OTD - 准时交付率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/backlog/">BL - 积压订单</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/total-inventory/">TI - 总库存</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/supplier-performance/">SP - 供应商绩效</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/procurement-savings/">PS - 采购成本节约</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >生产 KPI</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/production/">生产 KPI 总览</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/oee/">OEE - 设备综合效率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/pcp/">PCP - 生产计划完成率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/cur/">CUR - 产能利用率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/cycle-time/">CT - 生产周期时间</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/mfg-variances/">MV - 制造差异</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/period-expense/">PE - 期间费用</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/labor-efficiency/">LE - 人工效率</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >质量 KPI</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/quality/">质量 KPI 总览</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/fpy/">FPY - 一次合格率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/ncr/">NCR - 不合格品率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/capa/">CAPA - CAPA 完成率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/ccr/">CCR - 客户投诉率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/rework/">RW - 返工率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/process-capability/">PCI - 过程能力指数</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >持续改进 KPI</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/ci/">持续改进 KPI 总览</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/ci-project/">CI-Project - 改善项目完成率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/cost-savings/">CS - 成本节约</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/employee-engagement/">EE - 员工参与度</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/project-cycle-time/">PCT - 项目周期时间</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/roi/">ROI - 投资回报率</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/innovation-proposals/">IP - 创新提案数</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../kpi/standardization-rate/">SR - 标准化率</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">报表说明</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../reports/">报表总览</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reports/completed/">已完成报表</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reports/guides/">报表使用指南</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reports/maintenance/">报表维护说明</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">技术实现</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >ETL 流程</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../etl/">ETL 概述</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../etl/etl-process/">ETL 流程说明</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../etl/etl-sa/">SA 数据清洗</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../etl/etl-sfc/">SFC 数据清洗</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../etl/standard-time/">标准时间处理</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../etl/configuration/">配置说明</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Power Query 代码</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../pq/">PQ 概述</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../pq/mes-records/">MES 报工记录</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../pq/sfc-records/">SFC 报工记录</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../pq/standard-time/">标准时间查询</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../pq/incremental-refresh/">增量刷新方案</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">项目记录</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >项目总览与进展</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../project/progress/">项目总览</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../project/progress/progress/">详细进展文档</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >DMAIC 阶段记录</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" >定义阶段（Define）</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../project/01_Define_%E5%AE%9A%E4%B9%89%E9%98%B6%E6%AE%B5/">定义阶段概述</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../project/01_Define_%E5%AE%9A%E4%B9%89%E9%98%B6%E6%AE%B5/01_ProjectDefinition_%E9%A1%B9%E7%9B%AE%E5%AE%9A%E4%B9%89/">项目定义文档</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >测量阶段（Measure）</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../project/02_Measure_%E6%B5%8B%E9%87%8F%E9%98%B6%E6%AE%B5/">测量阶段概述</a>
                </li>
                <li class="toctree-l3"><a class="" href="../../project/02_Measure_测量阶段/01_DataCollectionPlan_数据收集计划.md">数据收集计划</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../project/02_Measure_%E6%B5%8B%E9%87%8F%E9%98%B6%E6%AE%B5/02_KpiSpecification_KPI%E8%AF%A6%E7%BB%86%E8%AF%B4%E6%98%8E/">KPI详细说明</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../project/02_Measure_%E6%B5%8B%E9%87%8F%E9%98%B6%E6%AE%B5/03_KpiMindmap_KPI%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/">KPI思维导图</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../project/02_Measure_%E6%B5%8B%E9%87%8F%E9%98%B6%E6%AE%B5/04_MeasurePhase_%E6%B5%8B%E9%87%8F%E9%98%B6%E6%AE%B5/">测量阶段文档</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../project/03_Analyze_%E5%88%86%E6%9E%90%E9%98%B6%E6%AE%B5/">分析阶段（Analyze）</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >改进阶段（Improve）</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../project/04_Improve_%E6%94%B9%E8%BF%9B%E9%98%B6%E6%AE%B5/">改进阶段概述</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../project/04_Improve_%E6%94%B9%E8%BF%9B%E9%98%B6%E6%AE%B5/01_ImprovementPlan_%E6%94%B9%E8%BF%9B%E6%96%B9%E6%A1%88/">改进方案</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >控制阶段（Control）</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../project/05_Control_%E6%8E%A7%E5%88%B6%E9%98%B6%E6%AE%B5/">控制阶段概述</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../project/05_Control_%E6%8E%A7%E5%88%B6%E9%98%B6%E6%AE%B5/01_ControlPlan_%E6%8E%A7%E5%88%B6%E8%AE%A1%E5%88%92/">控制计划</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >会议纪要</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../project/meetings/">会议纪要概述</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../project/meetings/meetings/">详细会议记录</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">参考资料</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../reference/naming-convention/">文件命名规范</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reference/dictionary/">字典表说明</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../changelog/">更新日志</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">CZ Ops 数字化数据平台 - 电子说明书</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">常见问题 FAQ</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="faq">常见问题 FAQ<a class="headerlink" href="#faq" title="Permanent link">&para;</a></h1>
<p>本页面汇总了用户在使用数据平台过程中的常见问题及解答。</p>
<hr />
<h2 id="sa">SA 指标相关<a class="headerlink" href="#sa" title="Permanent link">&para;</a></h2>
<h3 id="q1-sa-etl-power-bi">Q1: SA 指标的计算是在 ETL 还是 Power BI？<a class="headerlink" href="#q1-sa-etl-power-bi" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 所有 SA 指标的计算都在 <strong>ETL 阶段完成</strong>（<code>etl_sa.py</code> 脚本）。</p>
<ul>
<li>✅ <strong>已在 ETL 计算</strong>：LT(d)、PT(d)、ST(d)、DueTime、Weekend(d)、CompletionStatus</li>
<li>✅ <strong>Power BI 直接读取</strong>：无需二次计算，提高性能</li>
<li>✅ <strong>数据一致性</strong>：所有报表使用相同的计算逻辑</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">建议</p>
<p>如需修改计算逻辑，请修改 ETL 脚本，不要在 Power BI 中重新计算。</p>
</div>
<hr />
<h3 id="q2-lt-pt">Q2: 为什么 LT 和 PT 不扣除周末？<a class="headerlink" href="#q2-lt-pt" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 这是业务设计决策：</p>
<ul>
<li><strong>LT（Lead Time）</strong>：反映实际经过的日历时间，包括周末</li>
<li><strong>PT（Process Time）</strong>：反映实际加工时间，包括周末</li>
<li><strong>ST（Standard Time）</strong>：理论加工时间，不考虑周末</li>
<li><strong>DueTime</strong>：计划完工时间，<strong>会跳过周末</strong>（基于工作日日历，采用24小时连续工作制）</li>
</ul>
<div class="admonition example">
<p class="admonition-title">示例</p>
<p>如果批次周五开始，周一报工：</p>
<ul>
<li>LT/PT = 3 天（包括周六、周日）</li>
<li>DueTime 计算时会跳过周六、周日，每个工作日按24小时计算</li>
</ul>
</div>
<hr />
<h3 id="q3-0010">Q3: 0010 工序为什么要特殊处理？<a class="headerlink" href="#q3-0010" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 0010 工序是首道工序，具有特殊性：</p>
<ol>
<li><strong>Checkin_SFC 优先级最高</strong></li>
<li>0010 工序：Checkin_SFC → EnterStepTime → TrackInTime</li>
<li>
<p>其他工序：EnterStepTime</p>
</li>
<li>
<p><strong>业务含义</strong></p>
</li>
<li>Checkin_SFC 是批次正式进入生产的时间点</li>
<li>比 EnterStepTime 更准确</li>
</ol>
<div class="admonition note">
<p class="admonition-title">数据来源</p>
<p>Checkin_SFC 来自 SFC 系统，通过 ETL 合并到 MES 数据中。</p>
</div>
<hr />
<h3 id="q4-oee-77">Q4: OEE 为什么默认值是 77%？<a class="headerlink" href="#q4-oee-77" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 这是基于历史数据统计的行业经验值：</p>
<ul>
<li>如果标准时间表中 OEE 为空或 0，系统自动使用 <strong>0.77</strong></li>
<li>代表设备综合效率约 77%</li>
<li>可通过配置文件修改默认值</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">注意</p>
<p>标准时间表中应尽量填写实际 OEE 值，避免使用默认值。</p>
</div>
<hr />
<h3 id="q-sa">Q: SA 计算采用多少小时工作制？<a class="headerlink" href="#q-sa" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> SA 计算采用 <strong>24 小时连续工作制</strong>：</p>
<ul>
<li><strong>DueTime 计算</strong>：每个工作日按 24 小时计算</li>
<li><strong>非工作日</strong>：完全跳过（周末和法定节假日）</li>
<li><strong>业务逻辑</strong>：反映实际连续生产情况</li>
</ul>
<div class="admonition info">
<p class="admonition-title">计算示例</p>
<p>如果标准时间 ST = 72 小时：
- 需要 3 个完整工作日（3 × 24 = 72 小时）
- 中间的周末会被跳过，不计入工作时间</p>
</div>
<hr />
<h3 id="q5-setup">Q5: 换批（Setup）是如何判断的？<a class="headerlink" href="#q5-setup" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 换批判断逻辑：</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">if</span> <span class="n">PreviousBatchEndTime</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n">Setup</span> <span class="o">=</span> <span class="s2">&quot;Yes&quot;</span>  <span class="c1"># 第一批次</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">elif</span> <span class="n">CFN</span> <span class="o">==</span> <span class="n">上一批次的CFN</span><span class="p">:</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">Setup</span> <span class="o">=</span> <span class="s2">&quot;No&quot;</span>   <span class="c1"># 同一产品</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="k">else</span><span class="p">:</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="n">Setup</span> <span class="o">=</span> <span class="s2">&quot;Yes&quot;</span>  <span class="c1"># 产品切换</span>
</span></code></pre></div>
<p><strong>判断依据：</strong>
- 同一机台的连续批次
- 产品号（CFN）是否变化</p>
<div class="admonition info">
<p class="admonition-title">换批影响</p>
<p>Setup = "Yes" 时，会增加调试时间（Setup Time）</p>
</div>
<hr />
<h2 id="_1">数据处理相关<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h3 id="q6-parquet">Q6: 为什么使用 Parquet 格式？<a class="headerlink" href="#q6-parquet" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> Parquet 格式有以下优势：</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>Parquet</th>
<th>Excel/CSV</th>
</tr>
</thead>
<tbody>
<tr>
<td>文件大小</td>
<td>小 70-90%</td>
<td>大</td>
</tr>
<tr>
<td>读取速度</td>
<td>快 5-10 倍</td>
<td>慢</td>
</tr>
<tr>
<td>数据类型</td>
<td>精确保留</td>
<td>易丢失</td>
</tr>
<tr>
<td>Power BI 支持</td>
<td>✅ 原生支持</td>
<td>✅ 支持但慢</td>
</tr>
</tbody>
</table>
<div class="admonition success">
<p class="admonition-title">性能提升</p>
<p>使用 Parquet 后，Power BI 刷新时间从 10 分钟减少到 1-2 分钟。</p>
</div>
<hr />
<h3 id="q7">Q7: 如何更新数据？<a class="headerlink" href="#q7" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 数据更新流程：</p>
<ol>
<li><strong>下载最新 MES/SFC 文件</strong></li>
<li><strong>上传到 SharePoint 对应文件夹</strong></li>
<li><strong>运行 ETL 脚本</strong>（双击 <code>.bat</code> 文件）</li>
<li><strong>等待处理完成</strong>（生成 Parquet 文件）</li>
<li><strong>在 Power BI 中刷新数据</strong></li>
</ol>
<p>详细步骤请参考：<a href="../data-update/">数据更新流程</a></p>
<hr />
<h3 id="q8-etl">Q8: ETL 处理需要多长时间？<a class="headerlink" href="#q8-etl" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 处理时间取决于数据量：</p>
<table>
<thead>
<tr>
<th>数据量</th>
<th>处理时间</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt; 1万条</td>
<td>1-2 分钟</td>
<td>快速</td>
</tr>
<tr>
<td>1-10万条</td>
<td>3-5 分钟</td>
<td>正常</td>
</tr>
<tr>
<td>&gt; 10万条</td>
<td>5-15 分钟</td>
<td>较慢</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">优化建议</p>
<ul>
<li>使用增量更新而非全量更新</li>
<li>清理历史备份文件</li>
<li>升级服务器配置</li>
</ul>
</div>
<hr />
<h3 id="q9-etl">Q9: 如何知道 ETL 是否成功？<a class="headerlink" href="#q9-etl" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 检查方法：</p>
<ol>
<li>
<p><strong>查看日志文件</strong>
   <div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>logs/etl_sa.log
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>logs/etl_sfc.log
</span></code></pre></div></p>
</li>
<li>
<p><strong>检查输出文件</strong></p>
</li>
<li>是否生成新的 Parquet 文件？</li>
<li>文件大小是否合理？</li>
<li>
<p>文件时间戳是否最新？</p>
</li>
<li>
<p><strong>检查 Power BI</strong></p>
</li>
<li>刷新数据是否成功？</li>
<li>数据量是否正确？</li>
</ol>
<p>详细排查请参考：<a href="../troubleshooting/">故障排查指南</a></p>
<hr />
<h2 id="power-bi">Power BI 相关<a class="headerlink" href="#power-bi" title="Permanent link">&para;</a></h2>
<h3 id="q10-power-bi">Q10: Power BI 刷新失败怎么办？<a class="headerlink" href="#q10-power-bi" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 常见原因和解决方法：</p>
<table>
<thead>
<tr>
<th>错误信息</th>
<th>可能原因</th>
<th>解决方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>"文件未找到"</td>
<td>Parquet 文件路径错误</td>
<td>检查 Power Query 中的文件路径</td>
</tr>
<tr>
<td>"权限不足"</td>
<td>SharePoint 权限问题</td>
<td>联系管理员授权</td>
</tr>
<tr>
<td>"内存不足"</td>
<td>数据量过大</td>
<td>使用增量刷新</td>
</tr>
<tr>
<td>"超时"</td>
<td>网络或性能问题</td>
<td>增加超时时间或优化查询</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="q11-power-bi">Q11: 如何优化 Power BI 性能？<a class="headerlink" href="#q11-power-bi" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 优化建议：</p>
<ol>
<li><strong>使用增量刷新</strong></li>
<li>参考：<a href="../../pq/incremental-refresh/">增量刷新方案</a></li>
<li>
<p>只刷新最近数据（如最近 90 天）</p>
</li>
<li>
<p><strong>减少计算列</strong></p>
</li>
<li>计算已在 ETL 完成</li>
<li>
<p>避免在 Power BI 中重复计算</p>
</li>
<li>
<p><strong>优化数据模型</strong></p>
</li>
<li>删除不用的列</li>
<li>使用合适的数据类型</li>
<li>
<p>建立适当的关系</p>
</li>
<li>
<p><strong>使用 Parquet 格式</strong></p>
</li>
<li>已在使用中</li>
<li>比 Excel/CSV 快 5-10 倍</li>
</ol>
<hr />
<h3 id="q12-power-bi">Q12: 为什么 Power BI 中看不到最新数据？<a class="headerlink" href="#q12-power-bi" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 检查清单：</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> ETL 是否已运行？</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Parquet 文件是否已生成？</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> Power BI 是否已刷新？</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> 数据筛选器是否正确？</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> 日期范围是否包含最新数据？</li>
</ul>
<hr />
<h2 id="_2">配置相关<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<h3 id="q13-etl">Q13: 如何修改 ETL 配置？<a class="headerlink" href="#q13-etl" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 配置文件位置：</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>10-SA指标/13-SA数据清洗/config/config.yaml
</span></code></pre></div>
<p>常用配置：</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># 默认 OEE</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nt">default_oee</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.77</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="c1"># 换批时间（小时）</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="nt">setup_time_buffer</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="c1"># 每日工作时间（小时）</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="nt">daily_work_hours</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="c1"># 文件路径</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="nt">input_path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;输入文件夹路径&quot;</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="nt">output_path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;输出文件夹路径&quot;</span>
</span></code></pre></div>
<p>详细说明请参考：<a href="../../etl/configuration/">配置说明</a></p>
<hr />
<h3 id="q14">Q14: 如何更新工作日日历？<a class="headerlink" href="#q14" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 使用日历生成脚本：</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>python<span class="w"> </span>generate_calendar.py<span class="w"> </span>--year<span class="w"> </span><span class="m">2026</span>
</span></code></pre></div>
<p>或修改 <code>日历工作日表.csv</code> 文件：</p>
<table>
<thead>
<tr>
<th>日期</th>
<th>星期几</th>
<th>是否工作日</th>
<th>节假日名称</th>
</tr>
</thead>
<tbody>
<tr>
<td>2026-01-01</td>
<td>星期四</td>
<td>False</td>
<td>元旦</td>
</tr>
<tr>
<td>2026-01-02</td>
<td>星期五</td>
<td>True</td>
<td></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_3">数据质量相关<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<h3 id="q15-checkin_sfc">Q15: 为什么有些批次没有 Checkin_SFC？<a class="headerlink" href="#q15-checkin_sfc" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 可能的原因：</p>
<ol>
<li><strong>SFC 数据缺失</strong></li>
<li>该批次未在 SFC 系统 Check In</li>
<li>
<p>SFC 数据导出不完整</p>
</li>
<li>
<p><strong>匹配失败</strong></p>
</li>
<li>BatchNumber 或 Operation 不一致</li>
<li>
<p>数据格式问题</p>
</li>
<li>
<p><strong>解决方法</strong></p>
</li>
<li>使用 EnterStepTime 或 TrackInTime 作为备用</li>
<li>ETL 脚本已自动处理</li>
</ol>
<hr />
<h3 id="q16">Q16: 为什么有些批次没有标准时间参数？<a class="headerlink" href="#q16" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 可能的原因：</p>
<ol>
<li><strong>标准时间表缺失</strong></li>
<li>新产品还未录入标准时间</li>
<li>
<p>CFN 或 Operation 编码不一致</p>
</li>
<li>
<p><strong>解决方法</strong></p>
</li>
<li>补充标准时间表</li>
<li>检查 CFN 和 Operation 编码规范</li>
<li>ETL 日志会记录缺失记录</li>
</ol>
<hr />
<h3 id="q17">Q17: 数据中有异常值怎么办？<a class="headerlink" href="#q17" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 异常值处理：</p>
<ol>
<li><strong>识别异常</strong></li>
<li>LT/PT 异常大或小</li>
<li>DueTime 早于 TrackInTime</li>
<li>
<p>数量为负数</p>
</li>
<li>
<p><strong>排查原因</strong></p>
</li>
<li>查看原始数据</li>
<li>检查 ETL 日志</li>
<li>
<p>验证时间逻辑</p>
</li>
<li>
<p><strong>处理方法</strong></p>
</li>
<li>修正原始数据</li>
<li>更新 ETL 脚本</li>
<li>在 Power BI 中筛选</li>
</ol>
<hr />
<h2 id="_4">其他问题<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<h3 id="q18">Q18: 如何导出数据？<a class="headerlink" href="#q18" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 导出方法：</p>
<ol>
<li><strong>从 Power BI 导出</strong></li>
<li>
<p>可视化 → 更多选项 → 导出数据</p>
</li>
<li>
<p><strong>从 Parquet 文件读取</strong>
   <div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="s1">&#39;MES_处理后数据_latest.parquet&#39;</span><span class="p">)</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;导出数据.xlsx&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div></p>
</li>
</ol>
<hr />
<h3 id="q19">Q19: 如何获取技术支持？<a class="headerlink" href="#q19" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 联系方式：</p>
<ul>
<li><strong>数据平台技术支持组</strong></li>
<li><strong>CZ Ops 数字化团队</strong></li>
<li><strong>查看文档</strong>：<a href="../troubleshooting/">故障排查</a></li>
</ul>
<hr />
<h3 id="q20">Q20: 如何贡献文档改进建议？<a class="headerlink" href="#q20" title="Permanent link">&para;</a></h3>
<p><strong>A:</strong> 欢迎提供反馈：</p>
<ol>
<li>记录问题或建议</li>
<li>联系项目团队</li>
<li>我们会持续更新文档</li>
</ol>
<hr />
<h2 id="_5">找不到答案？<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>如果您的问题未在此列出：</p>
<ol>
<li>📖 <strong>搜索文档</strong>：使用顶部搜索功能</li>
<li>🛠️ <strong>故障排查</strong>：参考 <a href="../troubleshooting/">故障排查指南</a></li>
<li>📞 <strong>联系支持</strong>：联系技术支持团队</li>
</ol>
<hr />
<div class="admonition question">
<p class="admonition-title">有更多问题？</p>
<p>欢迎将您的问题反馈给我们，帮助我们完善文档！</p>
</div>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script src="../../javascripts/mathjax.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
